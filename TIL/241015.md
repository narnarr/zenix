# Docker Layer
- 도커는 빌드 효율과 공간 절약, 시간 단축을 위해 레이어를 만들어 저장하여 사용한다.
- 크게 이미지 레이어와 컨테이너 레이어로 구분할 수 있다.

## Image Layer
> 파일시스템의 변경사항을 캡처하는 단위
- 이미지 레이어를 생성하는 기준은 Dockerfile 에서 파일시스템에 변화를 주는 단위이다.
- 이미지 레이어는 Read Only 이다.

## Container Layer 
> 독립된 컨테이너 공간에 생성되는 레이어
- 이미지를 이용해 컨테이너를 실행할 경우, 독립된 namespace 공간에 이미지 레이어의 스냅샷들이 mount 되고, 그 위에 컨테이너 레이어가 생성된다.
- 컨테이너 레이어는 Writable 이다.
- 즉, 컨테이너에서의 변경사항은 기존 이미지 레이어에 영향을 끼치지 않으며 해당 컨테이너의 격리된 공간 내에서만 행해진다.

## UnionFS
> 여러 겹의 레이어를 하나의 파일 시스템처럼 동작하게 하는 시스템
- 디렉토리 간에 ‘상위’와 ‘하위’ 관계를 상정하고, 하위 디렉토리부터 내용물을 하나의 디렉토리처럼 합쳐서 보여주는 시스템이다. 
- 디렉토리 간에 겹치는 정보가 있다면 상위 디렉토리의 데이터를 사용한다.

### 참고
- https://creboring.net/blog/how-docker-divide-image-layer/

### 관련
- 데이터의 영속성 관리 -> volume vs bind-mount 